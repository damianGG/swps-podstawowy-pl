"use strict";
! function($) {
    $(document).ready(function() {
        var timeoutHolder;
        $("div[itemprop=articleBody] > *").not(".projekt-naglowek").wrapAll('<div class="container"></div>'), $('div[itemprop="articleBody"] > .container > *').wrapAll('<div class="col-right"></div>'), $(".projekt-naglowek").each(function() { $(this).children().wrapAll('<div class="container"></div>') }), $('div[itemprop="articleBody"] > .container .col-right').prepend($(".moduletable.breadcrumbs")), $(".zespol").addClass("card-wrapper"), $("div[itemprop=articleBody]>.container").after($(".custom.adresinfo")), $(".cp-tags .cp-tag").addClass("btn btn-tag"), $('.ppl-card>div>a:not([href^="mailto"])').addClass("bio icon-user"), $('.ppl-card>div>a[href^="mailto"]').addClass("email icon-email"), $(".publikacje .infoBox a").addClass("btn");
        var stickyAside = $(".projekt-naglowek .container>div").clone().addClass("sidebar sticky-aside"),
            txt = stickyAside.find("h1").get(0).innerHTML,
            h1Classes = stickyAside.find("h1").attr("class");
        if (stickyAside.find(".tags-wrapper").remove(), stickyAside.find(".finance").remove(), stickyAside.find(".other").remove(), stickyAside.find(".imie-i-nazwisko, .project-role").addClass("p1"), stickyAside.find(".bioinfo").before(stickyAside.find(".project-role")), stickyAside.find("h1").replaceWith('<h2 class="' + h1Classes + '">' + txt + "</h2>"), $(".col-right").before(stickyAside), $('[itemprop="articleBody"]').append($("#kontakt")), $(window).on("scroll", function() {
                var s = $(window).scrollTop(),
                    ph = $(".projekt-naglowek");
                ph.height() + ph.offset().top <= s ? $(".sidebar").addClass("shown") : $(".sidebar").removeClass("shown")
            }), $(window).on("resize", function() { clearTimeout(timeoutHolder), timeoutHolder = setTimeout(function() { window.innerWidth < 769 ? $(".zespol .item").each(function() { $(this).children(".biogram-links").length || ($(this).children().children("a.email, a.bio").wrapAll('<div class="biogram-links"></div>'), $(this).append($(this).find(".biogram-links"))) }) : $(".zespol .item").each(function() { $(this).children(".fields").prepend($(this).find("a.email, a.bio")), $(this).children(".biogram-links").remove() }) }, 200) }), $(window).resize(), $(".publikacje").length) {
            $(".publikacje").clone();
            $(".col-right .publikacje").addClass("container").children().not(".infoBox").wrapAll('<div class="col-right"></div>'), $(".col-right .publikacje").children(".infoBox").addClass("sidebar sticky-aside"), $(".col-right .publikacje").nextAll().wrapAll('<div class="container next-container"><div class="col-right"></div></div>'), $(".article-footer").before($(".next-container")), $(".next-container").before($(".col-right .publikacje"))
        }
        //    aktualności strony Konrad Maj start 

        jQuery('#aktualnosci').append('<span class="slide-counter" style="display:flex"><p class="currentPage"></p><p class="allPage"></p></span>')
        var $status = jQuery('.slide-counter');
        var $slickElement = jQuery('.news-wrapper.news-slider');

        $slickElement.on('init reInit afterChange', function(event, slick, currentSlide, nextSlide) {
            //currentSlide is undefined on init -- set it to 0 in this case (currentSlide is 0 based)
            var i = (currentSlide ? currentSlide : 0) + 1;
            $status.find(".currentPage").text(Math.ceil(i / 3));
            $status.find(".allPage").text("/" + Math.ceil(slick.slideCount / 3));

        });

        $slickElement.slick({
            infinite: true,
            speed: 300,
            rows: 2,
            slidesToShow: 3,
            variableWidth: false,
            slidesToScroll: 3,
            prevArrow: '<button class="prev" aria-label="Przewiń w lewo"><i class="icon-arrow" aria-hidden="true"></i></button>',
            nextArrow: '<button class="next" aria-label="Przewiń w prawo"><i class="icon-arrow" aria-hidden="true"></i></button>',
            responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        infinite: true,
                        dots: true
                    }
                },
                {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }
            ]
        });
        jQuery('.prev').before(jQuery('.slide-counter'))
        jQuery('#aktualnosci .slick-slide .news-item a').append('<i class="icon-arrow" aria-hidden="true"></i>')
            //    aktualności dla strony Konrad Maj end

        //dodatkowy start

        //dodatkowy end 
        //Mailchimp start
        jQuery(".projekt-naglowek").after(jQuery('#mc_embed_signup'));
        //mailchimp end
        jQuery('#aktualnosci > div > div > button.prev.slick-arrow > i').before('<hr class="aktualnosci-line"></hr>')

    })
}(jQuery);